<!-- views/admin/add-product.ejs -->
<section class="admin-section">
    <div class="container">
      <div class="admin-header">
        <h1>Add New Product</h1>
        <a href="/admin/products" class="btn btn-outline">
          <i class="fas fa-arrow-left"></i> Back to Products
        </a>
      </div>
      
      <div class="admin-form-container">
        <form action="/admin/products/add" method="POST" class="admin-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="name">Product Name</label>
              <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
              <label for="category">Category</label>
              <select id="category" name="category" required>
                <option value="">Select a category</option>
                <option value="giftcard">Gift Card</option>
                <option value="account">Account</option>
                <option value="currency">Digital Currency</option>
                <option value="other">Other</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="price">Price ($)</label>
              <input type="number" id="price" name="price" step="0.01" min="0" required>
            </div>
            
            <div class="form-group">
              <label for="stock">Stock</label>
              <input type="number" id="stock" name="stock" min="0" required>
            </div>
            
            <div class="form-group full-width">
              <label for="imageUrl">Image URL</label>
              <input type="url" id="imageUrl" name="imageUrl" required>
              <p class="form-hint">Enter a direct URL to the product image</p>
            </div>
            
            <div class="form-group full-width">
              <label for="description">Description</label>
              <textarea id="description" name="description" rows="5" required></textarea>
            </div>
            
            <!-- Dynamic fields based on category -->
            <div id="giftcard-fields" class="category-fields form-group full-width" style="display: none;">
              <label for="codes">Gift Card Codes (one per line)</label>
              <textarea id="codes" name="codes" rows="5" placeholder="Enter each code on a new line"></textarea>
              <p class="form-hint">Each code will be assigned to a customer upon purchase</p>
            </div>
            
            <div id="account-fields" class="category-fields form-group full-width" style="display: none;">
              <label for="accounts">Accounts (username:password, one per line)</label>
              <textarea id="accounts" name="accounts" rows="5" placeholder="username:password"></textarea>
              <p class="form-hint">Format: username:password (one account per line)</p>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Add Product</button>
            <a href="/admin/products" class="btn btn-outline">Cancel</a>
          </div>
        </form>
      </div>
    </div>
  </section>
  
  <script>
    // Show/hide fields based on category selection
    document.getElementById('category').addEventListener('change', function() {
      const category = this.value;
      const categoryFields = document.querySelectorAll('.category-fields');
      
      // Hide all category-specific fields
      categoryFields.forEach(field => {
        field.style.display = 'none';
      });
      
      // Show fields based on selected category
      if (category === 'giftcard') {
        document.getElementById('giftcard-fields').style.display = 'block';
      } else if (category === 'account') {
        document.getElementById('account-fields').style.display = 'block';
      }
    });
    
    // Image preview
    document.getElementById('imageUrl').addEventListener('blur', function() {
      const url = this.value;
      if (url) {
        // You could add image preview functionality here
        console.log('Image URL entered:', url);
      }
    });
  </script>